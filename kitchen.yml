---
driver:
  name: vagrant
  customize:
    memory: 1024
    cpus: 1

provisioner:
  name: chef_zero
  product_name: chef
  product_version: <%= ENV['chef_release'] %>
  install_strategy: once
  deprecations_as_errors: true
  chef_license: accept-no-persist

verifier:
  name: inspec

platforms:
  - name: bento/centos-8
  - name: bento/centos-7

suites:
  - name: checkmks
    driver_config:
      network:
        - ['private_network', ip: '10.1.1.20']
    provisioner:
      named_run_list: cmk_server
    verifier:
      inspec_tests:
        - test/integration/default
  - name: checkmka
    driver_config:
      network:
        - ['private_network', ip: '10.1.1.21']
    provisioner:
      named_run_list: cmk_agent
    verifier:
      inspec_tests:
        - test/integration/default
